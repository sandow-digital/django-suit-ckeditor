CKEDITOR.plugins.add("video",{init:function(e){e.addCommand("videoDialog",new CKEDITOR.dialogCommand("videoDialog")),e.ui.addButton("Video",{label:"Insert Video",command:"videoDialog",icon:this.path+"images/video.png"}),CKEDITOR.dialog.add("videoDialog",function(e){return{title:"Video Properties",minWidth:400,minHeight:200,contents:[{id:"tab1",label:"Basic Settings",elements:[{type:"text",id:"id",label:"ID - Unique number identifying the video, dont use the same one twice in one page",validate:CKEDITOR.dialog.validate.notEmpty("ID field cannot be empty")},{type:"text",id:"video",label:"Video File Name",validate:CKEDITOR.dialog.validate.notEmpty("Video File Name field cannot be empty")},{type:"text",id:"width",label:"Width of video in pixels (leave blank for full width of the container)"},{type:"text",id:"height",label:"Height of video in pixels (leave blank for automatic height based on width)"}]}],onOk:function(){var t=this,i=e.document.createElement("div"),d=t.getValueOf("tab1","width"),a=t.getValueOf("tab1","height");i.setAttribute("data-videofile",t.getValueOf("tab1","video")),i.setAttribute("id","video-"+t.getValueOf("tab1","id")),i.setAttribute("class","video"),d&&a?i.setAttribute("style","width:"+d+"px;height:"+a+"px;"):d?i.setAttribute("style","width:"+d+"px;"):a&&i.setAttribute("style","height:"+a+"px;"),e.insertElement(i),e.insertHtml("<p>&nbsp;</p>")}}})}});